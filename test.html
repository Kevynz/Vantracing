<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VanTracing - Test i18n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="estilo.css">
    <link rel="stylesheet" href="css/i18n.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border-left: 4px solid #007bff;
            background: #f8f9fa;
        }
        .status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status.ok {
            background: #d4edda;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ VanTracing - Test Page / P√°gina de Teste</h1>
        <p>This page tests the internationalization system / Esta p√°gina testa o sistema de internacionaliza√ß√£o</p>
        
        <hr>
        
        <div class="test-section">
            <h3>‚úÖ Test 1: Files Loaded / Arquivos Carregados</h3>
            <p>JavaScript i18n.js: <span id="i18n-loaded" class="status error">Not Loaded</span></p>
            <p>CSS i18n.css: <span id="css-loaded" class="status error">Not Loaded</span></p>
        </div>

        <div class="test-section">
            <h3>‚úÖ Test 2: Language Detection / Detec√ß√£o de Idioma</h3>
            <p>Current Language / Idioma Atual: <strong id="current-lang">Loading...</strong></p>
            <p>Browser Language / Idioma do Navegador: <strong id="browser-lang">Loading...</strong></p>
        </div>

        <div class="test-section">
            <h3>‚úÖ Test 3: Translation System / Sistema de Tradu√ß√£o</h3>
            <p data-i18n="login">Login</p>
            <p data-i18n="email">E-mail</p>
            <p data-i18n="password">Senha</p>
            <p data-i18n="dashboard">Painel de Controle</p>
            <p data-i18n="logout">Sair</p>
        </div>

        <div class="test-section">
            <h3>‚úÖ Test 4: Language Switcher / Bot√£o de Troca de Idioma</h3>
            <p>Check if the language switcher button appears in the top right corner.</p>
            <p>Verifique se o bot√£o de troca de idioma aparece no canto superior direito.</p>
        </div>

        <div class="test-section">
            <h3>‚úÖ Test 5: Manual Translation / Tradu√ß√£o Manual</h3>
            <p>Test t() function / Teste fun√ß√£o t():</p>
            <ul id="manual-tests">
                <li>Loading...</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>‚úÖ Test 6: Database Connection / Conex√£o com Banco de Dados</h3>
            <p>Environment variables support: <span id="env-support" class="status ok">Implemented</span></p>
            <p>See .env.example file for configuration / Veja arquivo .env.example para configura√ß√£o</p>
        </div>

        <div class="test-section">
            <h3>üìã Test Results / Resultados dos Testes</h3>
            <div id="test-results">
                <p>Running tests... / Executando testes...</p>
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="index.html" class="btn btn-primary">Go to Login / Ir para Login</a>
            <a href="README.md" class="btn btn-secondary">View Documentation / Ver Documenta√ß√£o</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="JavaScript/i18n.js"></script>
    <script src="JavaScript/geral.js"></script>
    
    <script>
        // Test script / Script de teste
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for i18n to load / Aguarda carregamento do i18n
            setTimeout(runTests, 500);
        });

        function runTests() {
            const results = [];
            
            // Test 1: Check if i18n is loaded
            if (typeof currentLanguage !== 'undefined' && typeof t === 'function') {
                document.getElementById('i18n-loaded').textContent = 'Loaded ‚úì';
                document.getElementById('i18n-loaded').className = 'status ok';
                results.push('‚úÖ i18n.js loaded successfully');
            } else {
                results.push('‚ùå i18n.js failed to load');
            }

            // Check CSS
            const languageSwitcher = document.querySelector('.language-switcher');
            if (languageSwitcher) {
                document.getElementById('css-loaded').textContent = 'Loaded ‚úì';
                document.getElementById('css-loaded').className = 'status ok';
                results.push('‚úÖ i18n.css loaded and language switcher created');
            } else {
                results.push('‚ö†Ô∏è Language switcher not found (may take a moment)');
            }

            // Test 2: Language detection
            if (typeof currentLanguage !== 'undefined') {
                document.getElementById('current-lang').textContent = currentLanguage.toUpperCase();
                results.push(`‚úÖ Current language detected: ${currentLanguage}`);
            }
            
            const browserLang = navigator.language || navigator.userLanguage;
            document.getElementById('browser-lang').textContent = browserLang;
            results.push(`‚ÑπÔ∏è Browser language: ${browserLang}`);

            // Test 5: Manual translation
            if (typeof t === 'function') {
                const manualTestsList = document.getElementById('manual-tests');
                manualTestsList.innerHTML = `
                    <li>t('login') = "${t('login')}"</li>
                    <li>t('email') = "${t('email')}"</li>
                    <li>t('success') = "${t('success')}"</li>
                    <li>t('dashboard') = "${t('dashboard')}"</li>
                `;
                results.push('‚úÖ t() function working correctly');
            }

            // Display results
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<ul>' + results.map(r => `<li>${r}</li>`).join('') + '</ul>';

            // Count successes
            const successCount = results.filter(r => r.startsWith('‚úÖ')).length;
            const totalTests = results.filter(r => r.startsWith('‚úÖ') || r.startsWith('‚ùå')).length;
            
            resultsDiv.innerHTML += `
                <div class="alert alert-${successCount === totalTests ? 'success' : 'warning'} mt-3">
                    <strong>Tests Passed / Testes Aprovados: ${successCount}/${totalTests}</strong><br>
                    ${successCount === totalTests ? 
                        'üéâ All systems operational! / Todos os sistemas operacionais!' : 
                        '‚ö†Ô∏è Some issues detected. Check console for details. / Alguns problemas detectados. Verifique o console.'}
                </div>
            `;
        }

        // Log for debugging
        console.log('üß™ VanTracing Test Page Loaded');
        console.log('Current Language:', typeof currentLanguage !== 'undefined' ? currentLanguage : 'Not loaded');
        console.log('Translation function available:', typeof t === 'function');
    </script>
</body>
</html>
